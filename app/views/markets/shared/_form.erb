<%= simple_form_for [user, market] do |f| %>
  <%= f.input :name, imput_html: { class: 'market-name' }%>
  <%= f.input :description, label_html: { class: 'market-description' } %>
  <%= f.association :category, :include_blank => false %>
  <%= f.input :featured, as: :attachinary %>
  <%= f.button :submit %>
<% end %>

<script>

var button = $('#commit');
var orig = [];

$.fn.getType = function () {
    return this[0].tagName == "INPUT" ? $(this[0]).attr("type").toLowerCase() : this[0].tagName.toLowerCase();
}

$("form :input").each(function () {
    var type = $(this).getType();
    var tmp = {
        'type': type,
        'value': $(this).val()
    };
    orig[$(this).attr('id')] = tmp;
});

$('form').bind('change keyup', function () {

    var disable = true;
    $("form :input").each(function () {
        var type = $(this).getType();
        var id = $(this).attr('id');

        if (type == 'text' || type == 'select') {
            disable = (orig[id].value == $(this).val());
        } 
        if (!disable) {
            return false; // break out of loop
        }
    });

    button.prop('disabled', disable);
});
</script>